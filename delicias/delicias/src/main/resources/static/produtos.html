<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Doce Sabor ‚Äî Produtos</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <img
            src="img/delicias da fer.png"
            alt="Delicias da Fer Lopes"
            class="logo"
          />
          <div class="brand-text">
            <h1>Delicias</h1>
            <small>Fer Lopes</small>
          </div>
        </div>
        <nav class="main-nav">
          <a class="nav-link" href="index.html">In√≠cio</a>
          <a class="nav-link active" href="produtos.html">Produtos</a>
          <a class="nav-link" href="sobre.html">Sobre</a>
          <a class="nav-link" href="carrinho.html">Carrinho</a>
        </nav>
        <div class="header-actions">
          <a class="phone" href="tel:+5511999999999">üìû (15) 99717-2394</a>
          <a class="cart-link" href="carrinho.html"
            >üõí <span id="cart-count-badge">0</span></a
          >
        </div>
      </div>
    </header>

    <!-- HERO -->
    <section
      class="section hero small-hero"
      style="
        position: relative;
        background-image: url('img/3e30b902036cb2ece2dedcb1822b0070.jpg');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        color: #fff;
        overflow: hidden;
      "
    >
      <div
        style="
          position: absolute;
          inset: 0;
          background: rgba(255, 255, 255, 0.419);
          z-index: 0;
        "
      ></div>
      <div
        class="container"
        style="
          position: relative;
          z-index: 1;
          text-align: center;
          animation: fadeSlideUp 1s ease-out;
        "
      >
        <h2 class="section-title"></h2>
      </div>
    </section>

    <main class="container produtos-page">
      <!-- FILTROS -->
      <div class="filtros">
        <input type="text" id="searchInput" placeholder="Buscar produto..." />
        <select id="filterCategory">
          <option value="">Todas as categorias</option>
          <option value="bolos">Bolos</option>
          <option value="doces">Doces</option>
          <option value="tortas">Tortas</option>
        </select>
      </div>

      <!-- BOT√ÉO SOMENTE PARA CONFEITEIRA -->
      <div id="adminArea" style="display:none; text-align:center; margin: 20px 0;">
        <button id="btnAddProduto" class="btn primary">‚ûï Adicionar Novo Produto</button>
      </div>

      <!-- GRID DE PRODUTOS -->
      <div id="produtosGrid" class="grid-cardapio"></div>

      <!-- FORMUL√ÅRIO DE ADI√á√ÉO -->
      <div id="addProdutoForm" style="display:none; margin-top:30px;">
        <h3>Adicionar Novo Produto</h3>
        <input type="text" id="nomeProduto" placeholder="Nome do produto" required>
        <input type="text" id="precoProduto" placeholder="Pre√ßo (ex: R$ 25,00)" required>
        <input type="text" id="categoriaProduto" placeholder="Categoria (bolo, doce...)" required>
        <input type="text" id="imagemProduto" placeholder="URL da imagem" required>
        <button id="salvarProduto" class="btn primary">Salvar Produto</button>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <div>¬© <span id="year"></span> Delicias Fer Lopes ‚Äî Todos os direitos reservados.</div>
        <div>üìû (15) 99717-2394 ‚Ä¢ Sorocaba</div>
      </div>
    </footer>

    <script>
  document.addEventListener('DOMContentLoaded', () => {
    const adminArea = document.getElementById('adminArea');
    const addProdutoForm = document.getElementById('addProdutoForm');
    const btnAddProduto = document.getElementById('btnAddProduto');
    const produtosGrid = document.getElementById('produtosGrid');
    const salvarProduto = document.getElementById('salvarProduto');

    // üîê Verifica login da confeiteira
    const isLogada = localStorage.getItem('isConfeiteiraLogada') === 'true';
    if (isLogada) {
      adminArea.innerHTML = `
        <button id="btnAddProduto" class="btn primary">‚ûï Adicionar Novo Produto</button>
        <button id="btnRemoverProduto" class="btn danger" style="margin-left:10px;">üóëÔ∏è Remover Produto</button>
      `;
      adminArea.style.display = 'block';
    }

    // Fun√ß√£o para ativar o modo de remo√ß√£o
    function ativarRemocao() {
      const cards = document.querySelectorAll('.card-produto');
      cards.forEach((card) => {
        if (!card.querySelector('.delete-btn')) {
          const btnDel = document.createElement('button');
          btnDel.textContent = '‚ùå';
          btnDel.className = 'delete-btn';
          btnDel.style.position = 'absolute';
          btnDel.style.top = '5px';
          btnDel.style.right = '5px';
          btnDel.style.background = '#ff4d4d';
          btnDel.style.color = '#fff';
          btnDel.style.border = 'none';
          btnDel.style.borderRadius = '50%';
          btnDel.style.width = '25px';
          btnDel.style.height = '25px';
          btnDel.style.cursor = 'pointer';
          btnDel.style.fontSize = '14px';
          btnDel.style.display = 'flex';
          btnDel.style.alignItems = 'center';
          btnDel.style.justifyContent = 'center';
          btnDel.title = 'Remover produto';

          btnDel.addEventListener('click', () => {
            if (confirm('Tem certeza que deseja remover este produto?')) {
              card.remove();
            }
          });
          card.style.position = 'relative';
          card.appendChild(btnDel);
        }
      });
      alert('Modo de remo√ß√£o ativado! Clique no ‚ùå para excluir um produto.');
    }

    // Delegar eventos ap√≥s login
    if (isLogada) {
      const btnAdd = document.getElementById('btnAddProduto');
      const btnRemover = document.getElementById('btnRemoverProduto');

      btnAdd.addEventListener('click', () => {
        addProdutoForm.style.display =
          addProdutoForm.style.display === 'none' ? 'block' : 'none';
      });

      btnRemover.addEventListener('click', ativarRemocao);
    }

    // Fun√ß√£o de salvar novo produto
    salvarProduto.addEventListener('click', () => {
      const nome = document.getElementById('nomeProduto').value.trim();
      const preco = document.getElementById('precoProduto').value.trim();
      const categoria = document.getElementById('categoriaProduto').value.trim();
      const imagem = document.getElementById('imagemProduto').value.trim();

      if (!nome || !preco || !imagem) {
        alert('Preencha todos os campos!');
        return;
      }

      const produtoCard = `
        <div class="card-produto" style="position:relative;">
          <img src="${imagem}" alt="${nome}">
          <h3>${nome}</h3>
          <p>${preco}</p>
          <button>Adicionar ao Carrinho</button>
        </div>
      `;
      produtosGrid.insertAdjacentHTML('beforeend', produtoCard);

      // Limpa o formul√°rio
      document.getElementById('nomeProduto').value = '';
      document.getElementById('precoProduto').value = '';
      document.getElementById('categoriaProduto').value = '';
      document.getElementById('imagemProduto').value = '';
      addProdutoForm.style.display = 'none';
    });
  });
</script>
